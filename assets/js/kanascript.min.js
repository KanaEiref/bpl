/*! auxform 23-07-2013 */
!function(){"use strict";function a(a){switch(a){case"neutual":$("#lock").removeClass();break;case"pass":$("#lock").removeClass("notPass").addClass("pass");break;case"notPass":$("#lock").removeClass("pass").addClass("notPass")}}function b(a){var b=$("#securityCode").val().length,c=a.data.name;"amex"==c?4===b?$("#vCode").removeClass().addClass("passImage"):($("#vCode").removeClass().addClass("errorImage"),$("#securityCode").removeClass().addClass("error")):3===b?$("#vCode").removeClass().addClass("passImage"):($("#vCode").removeClass().addClass("errorImage"),$("#securityCode").removeClass().addClass("error"))}function c(a){var b="unknown";return/^5[1-5]/.test(a)?b="mastercard":/^4/.test(a)?b="visa":/^6(?:011|5)/.test(a)?b="discover":/^3[47]/.test(a)&&(b="amex"),console.log(b),b}function d(){$("#amexcard").prop("checked",!1),$("#visaCard").prop("checked",!1),$("#discoverCard").prop("checked",!1),$("#masterCard").prop("checked",!1)}function e(a){var e=a.target.value;if(console.log(e),""===e)return $("#vNumber").removeClass().addClass("hidden"),d(),void 0;var f=c(e);switch($("#cardNumber").removeClass(),f){case"amex":$("#amexcard").prop("checked",!0),$("#vNumber").removeClass().addClass("passImage"),$("#securityCode").on("blur",{name:f},b);break;case"visa":$("#vNumber").removeClass().addClass("passImage"),$("#visaCard").prop("checked",!0),$("#securityCode").on("blur",{name:f},b);break;case"discover":$("#vNumber").removeClass().addClass("passImage"),$("#discoverCard").prop("checked",!0),$("#securityCode").on("blur",{name:f},b);break;case"mastercard":$("#vNumber").removeClass().addClass("passImage"),$("#masterCard").prop("checked",!0),$("#securityCode").on("blur",{name:f},b);break;default:$("#vNumber").removeClass().addClass("errorImage"),$("#cardNumber").removeClass().addClass("error")}}Modernizr.input.required||Monderizr.load({load:"assets/js/vendor/jquery.validate.min.js",complete:function(){$("#kanaform").validate({rules:{portfolioAddress:"required",portfolioTitle:"required",name:{required:!0,minlength:2},email:{required:!0,email:!0},password:{required:!0,minlength:5},cardNumber:"required",securityCode:"required",monthList:"required",yearList:"required"},messages:{portfolioAddress:"Please enter your portfolio address",portfolioTitle:"Please enter your portfoilo title",name:{required:"Please enter a name",minlength:"Your name must consist of at least 2 characters"},email:"Please enter a valid email address",password:{required:"Please provide a password",minlength:"Your password must be at least 5 characters long"},cardNumber:"Please enter your credit card number",securityCode:"Please enter your security code",monthList:"Please enter your card expiration month",yearList:"Please enter your card expiration year"}})}}),$("#monthList").blur(function(){"month"==$(this).val()?(a("notPass"),$(this).removeClass().addClass("error")):a("neutual")}),$("#yearList").blur(function(){"year"==$(this).val()?(a("notPass"),$(this).removeClass().addClass("error")):a("neutual")}),$("#showPassword").change(function(){$("#hiddenPassword").attr("readonly","readonly"),$("#hiddenPassword").val($("#password").val());var a=$(this).prop("checked");a?($("#password").hide(),$("#hiddenPassword").show()):($("#password").show(),$("#hiddenPassword").hide())}),document.addEventListener("DOMContentLoaded",function(){var a=document.getElementById("cardNumber");a.addEventListener("keyup",e,!1),a.addEventListener("blur",e,!1)},!1)}();